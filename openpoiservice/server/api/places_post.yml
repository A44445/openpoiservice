tags:
  - Places
summary: openpoiservice (POST)
description: |
            Returns Points of Interest in the area surrounding a geometry.
consumes:
  - application/json
produces:
  - application/json
parameters:
  - name: body
    in: body
    required: True
    description: body for a post request
    schema:
      $ref: '#/definitions/LocationsBody'

responses:
  200:
    description: Standard response for successfully processed requests.
    schema:
      $ref: '#/definitions/LocationsPoiResponse'
  400:
    description: Unable to parse JSON request.
  401:
    description: Required parameter is missing.
  402:
    description: Invalid parameter format.
  403:
    description: Invalid parameter value.
  404:
    description: Parameter value exceeds the maximum allowed limit.
  499:
    description: Unknown internal error.

definitions:

  # POST
  LocationsBody:
    properties:
      request:
        type: string
        example: pois
        enum:
        - pois
        - category_stats
        - category_list
      category_group_ids:
        type: array
        items:
          type: integer
          format: int64
          example: 560
      category_ids:
        type: array
        items:
          type: integer
          format: int64
          example: 561
      limit:
        type: integer
        format: int64
        example: 1000
      radius:
        type: integer
        format: int64
        example: 500
      sortby:
        type: string
        example: category
        enum:
        - category
        - distance
      bbox:
        type: array
        example: [[53.075051,8.798952],[53.080785,8.907160]]
        description: The pattern for this bbox string is minlon,minlat,maxlon,maxlat
      geometry_type:
        type: string
        example: polygon
        enum:
        - polygon
        - point
        - linestring
      geometry:
        $ref: "#/definitions/geometry"
        description: You have to specify at least one of bbox and geometry


      # CUSTOM FIELDS
      name:
        description: Name to filter the POIs by using sql like.
        type: string
        example: Tankstelle
      wheelchair:
        description: Filter returned features by wheelchair tag entries.
        type: string
        example: "yes"
        enum: [yes, no, limited, designated]
      smoking:
        description: Filter returned features by smoking tag entries.
        type: string
        example: "no"
        enum:
        - dedicated
        - yes
        - no
        - separated
        - isolated
        - outside
      fee:
        description: Filter returned features by fee tag entries.
        type: string
        example: "no"
        enum:
        - yes
        - no
    title:  openpoiservice POST body

  geometry:
    description: The geometry can be either a point, linestring or polygon
    type: array
    example: [[53.075051,8.798952],[53.080785,8.907160],[53.080785,9.107160]]


  LocationsPoiResponse:
    type: "object"
    properties:
      type:
        type: "string"
        default: "FeatureCollection"
        example: "FeatureCollection"
      features:
        type: "array"
        items:
          $ref: "#/definitions/location_features"
        example:
          - {
              "type": "Feature",
              "geometry": {
                "type": "Point",
                "coordinates": [
                  8.1691,
                  47.444286
                ]
              },
              "properties": {
                "osm_id": "4491251090",
                "category": "451",
                "name": "Volg",
                "distance": "115.08"
              }
            }
          - {
              "type": "Feature",
              "geometry": {
                "type": "Point",
                "coordinates": [
                  8.168594,
                  47.380072
                ]
              },
              "properties": {
                "osm_id": "2754058215",
                "category": "474",
                "name": "Berner Früchte und Gemüse",
                "phone": "+41 (0)62 891 34 50/51",
                "website": "http://www.berner-gemuese.ch",
                "distance": "76.58"
              }
            }
      bbox:
        type: "array"
        items:
          type: "number"
          format: "double"
        maxItems: 4
        minItems: 4
        description: "Contains the minimum bounding box of all features."
        example:
          - 8.168594
          - 47.380072
          -  8.1691
          - 47.444286
      #info:
        #$ref: "#.."
    title: "Places Poi Response Object"

  location_features:
    type: "object"
    properties:
      type:
        type: "string"
        default: "Feature"
      geometry:
        $ref: "#/definitions/location_features_geometry"
      properties:
        $ref: "#/definitions/location_features_properties"
    title: "features object"

  location_features_geometry:
    properties:
      type:
        type: "string"
        default: "Point"
      coordinates:
        type: "array"
        items:
          type: "number"
          format: "double"
        maxItems: 2
        minItems: 2
    title: "geometry object"
  location_features_properties:
    properties:
      osm_id:
        type: "string"
      category:
        type: "string"
      name:
        type: "string"
      address:
        type: "string"
      phone:
        type: "string"
      website:
        type: "string"
      opening_hours:
        type: "string"
      wheelchair:
        type: "string"
      distance:
        type: "string"
    title: "properties object"